---
title: MCP Integration
description: Integrate logpare with AI coding assistants via the Model Context Protocol
---

import { UCPBadge } from '@/components/ucp-badge'

Learn how to integrate logpare with AI coding assistants via the Model Context Protocol (MCP).

<UCPBadge />

## Overview

logpare provides an MCP server that exposes log compression capabilities as tools for AI assistants. This enables AI agents to:

- Compress large log files before analysis
- Extract patterns from application logs
- Estimate compression ratios
- Process UCP checkout and A2A logs (with `--ucp` flag)

## Supported Clients

| Client | Transport | Config Location |
|--------|-----------|-----------------|
| Claude Desktop | stdio | `claude_desktop_config.json` |
| Claude Code (CLI) | stdio | `~/.claude.json` |
| Cursor | stdio/HTTP | `~/.cursor/mcp.json` |
| VS Code + Copilot | stdio/HTTP | `.vscode/mcp.json` |
| Windsurf | stdio/HTTP | `~/.codeium/windsurf/mcp_config.json` |
| ChatGPT | HTTP | Settings → Connectors |
| Gemini | HTTP | `~/.config/gcloud/mcp-config.json` |

---

## Claude Desktop

### Configuration File Locations

| Platform | Path |
|----------|------|
| macOS | `~/Library/Application Support/Claude/claude_desktop_config.json` |
| Windows | `%APPDATA%\Claude\claude_desktop_config.json` |
| Linux | `~/.config/Claude/claude_desktop_config.json` |

### Basic Configuration

```json
{
  "mcpServers": {
    "logpare": {
      "command": "npx",
      "args": ["-y", "@logpare/mcp"]
    }
  }
}
```

### With UCP Extension

```json
{
  "mcpServers": {
    "logpare": {
      "command": "npx",
      "args": ["-y", "@logpare/mcp", "--ucp"]
    }
  }
}
```

### With Custom Settings

```json
{
  "mcpServers": {
    "logpare": {
      "command": "npx",
      "args": ["-y", "@logpare/mcp", "--ucp"],
      "env": {
        "LOGPARE_MCP_FORMAT": "detailed",
        "LOGPARE_MCP_DEPTH": "5"
      }
    }
  }
}
```

### Setup Steps

1. Open Claude Desktop → Settings (or Claude menu → Settings)
2. Navigate to **Developer** tab
3. Click **Edit Config**
4. Add the configuration above
5. Save and restart Claude Desktop completely

### Verify Installation

After restart, look for the MCP server indicator (hammer icon) in the bottom-right corner of the input box.

---

## Claude Code (CLI)

### Add via CLI

```bash
# Basic installation
claude mcp add logpare -s user -- npx -y @logpare/mcp

# With UCP extension
claude mcp add logpare -s user -- npx -y @logpare/mcp --ucp
```

### Configuration File

Edit `~/.claude.json`:

```json
{
  "mcpServers": {
    "logpare": {
      "command": "npx",
      "args": ["-y", "@logpare/mcp", "--ucp"]
    }
  }
}
```

### Verify Installation

```bash
claude mcp list
# or use /mcp in a conversation to check status
```

---

## Cursor

### Configuration File Locations

| Scope | Path |
|-------|------|
| Global | `~/.cursor/mcp.json` |
| Project | `.cursor/mcp.json` (in project root) |

### stdio Configuration

```json
{
  "mcpServers": {
    "logpare": {
      "command": "npx",
      "args": ["-y", "@logpare/mcp", "--ucp"]
    }
  }
}
```

### With Environment Variables

```json
{
  "mcpServers": {
    "logpare": {
      "command": "npx",
      "args": ["-y", "@logpare/mcp"],
      "env": {
        "LOGPARE_MCP_FORMAT": "${env:LOGPARE_FORMAT}"
      }
    }
  }
}
```

### Variable Interpolation

Cursor supports these variables:
- `${env:NAME}` — environment variables
- `${userHome}` — home directory
- `${workspaceFolder}` — project root

---

## VS Code + GitHub Copilot

**Requires**: VS Code 1.102+ with GitHub Copilot

### Configuration File Locations

| Scope | Path |
|-------|------|
| Workspace | `.vscode/mcp.json` |
| Global | User profile (via Command Palette) |

### Configuration Format

```json
{
  "servers": {
    "logpare": {
      "type": "stdio",
      "command": "npx",
      "args": ["-y", "@logpare/mcp", "--ucp"]
    }
  }
}
```

### Setup via Command Palette

1. Open Command Palette (`Ctrl+Shift+P` / `Cmd+Shift+P`)
2. Run **MCP: Add Server**
3. Select **Command (stdio)**
4. Enter:
   - **Command**: `npx`
   - **Arguments**: `-y @logpare/mcp --ucp`
   - **Name**: `logpare`
5. Select scope (Workspace or Global)

### Start the Server

1. Open `.vscode/mcp.json`
2. Click the **Start** button at the top
3. Server tools will be discovered automatically

---

## Windsurf

### Configuration File Location

| Platform | Path |
|----------|------|
| macOS/Linux | `~/.codeium/windsurf/mcp_config.json` |
| Windows | `%USERPROFILE%\.codeium\windsurf\mcp_config.json` |

### Configuration

```json
{
  "mcpServers": {
    "logpare": {
      "command": "npx",
      "args": ["-y", "@logpare/mcp", "--ucp"]
    }
  }
}
```

### Setup via UI

1. Open Windsurf Settings
2. Select **Manage MCPs**
3. Click **View raw config** to edit `mcp_config.json`
4. Add the configuration above
5. Restart Windsurf

---

## ChatGPT

**Requires**: ChatGPT Pro or Plus account

### Setup Steps

1. Enable Developer Mode: Settings → Connectors → Advanced settings
2. Open Settings → Connectors tab
3. Click **Create new connector**
4. Configure:
   - **Name**: `logpare`
   - **MCP server URL**: Your hosted logpare MCP endpoint
   - **Authentication**: As required

> **Note**: ChatGPT requires an HTTP endpoint. For local usage, you'll need to host the MCP server with HTTP transport.

---

## Gemini Code Assist

### Configuration File

Edit `~/.config/gcloud/mcp-config.json`:

```json
{
  "servers": {
    "logpare": {
      "command": "npx",
      "args": ["-y", "@logpare/mcp", "--ucp"]
    }
  }
}
```

### Setup Steps

1. Add configuration to `mcp-config.json`
2. Restart your IDE
3. Tools will be available in Gemini Code Assist

---

## Available Tools

### Core Tools

| Tool | Description |
|------|-------------|
| `compress_logs` | Compress log lines with format/depth/threshold options |
| `compress_text` | Compress multi-line text |
| `analyze_patterns` | Quick pattern extraction |
| `estimate_compression` | Sample-based compression estimate |

### UCP Tools (--ucp flag)

| Tool | Description |
|------|-------------|
| `compress_checkout_logs` | UCP checkout session compression |
| `analyze_checkout_errors` | Error pattern analysis with suggestions |
| `compress_a2a_logs` | Agent-to-Agent log compression |

---

## Tool Reference

### compress_logs

Compress an array of log lines with full options.

```typescript
{
  lines: string[];           // Log lines to compress
  format?: 'summary' | 'detailed' | 'json';
  depth?: number;            // Default: 4
  simThreshold?: number;     // Default: 0.4
  maxTemplates?: number;     // Default: 50
}
```

### compress_text

Compress multi-line log text.

```typescript
{
  text: string;              // Multi-line log text
  format?: 'summary' | 'detailed' | 'json';
  depth?: number;
  simThreshold?: number;
  maxTemplates?: number;
}
```

### analyze_patterns

Extract patterns without full compression (faster).

```typescript
{
  lines: string[];
  maxPatterns?: number;      // Default: 20
}
```

### estimate_compression

Quick compression ratio estimate from sample.

```typescript
{
  lines: string[];
  sampleSize?: number;       // Default: 1000
}
```

### compress_checkout_logs (UCP)

Compress UCP checkout session logs.

```typescript
{
  lines: string[];
  session_id?: string;       // Filter by session ID (cs_*)
  preserve_errors?: boolean; // Default: true
  format?: 'summary' | 'detailed' | 'json' | 'ucp_json';
}
```

### analyze_checkout_errors (UCP)

Analyze UCP checkout error patterns.

```typescript
{
  lines: string[];
  include_suggestions?: boolean; // Default: true
  group_by?: 'error_code' | 'severity' | 'session' | 'time';
}
```

### compress_a2a_logs (UCP)

Compress Agent-to-Agent communication logs.

```typescript
{
  lines: string[];
  group_by_agent?: boolean;
  preserve_handoffs?: boolean;
  trace_id?: string;
}
```

---

## CLI Options

```bash
npx @logpare/mcp [options]

Options:
  --ucp, -u           Enable UCP extension
  --format, -f        Default format (summary|detailed|json)
  --depth, -d         Parse tree depth (2-8, default: 4)
  --threshold, -t     Similarity threshold (0.0-1.0, default: 0.4)
  --max-lines, -m     Max lines per request (default: 100000)
  --test              Run self-test
  --help, -h          Show help
```

---

## Environment Variables

| Variable | Description | Default |
|----------|-------------|---------|
| `LOGPARE_MCP_FORMAT` | Default output format | `summary` |
| `LOGPARE_MCP_DEPTH` | Drain algorithm depth | `4` |
| `LOGPARE_MCP_THRESHOLD` | Similarity threshold | `0.4` |
| `LOGPARE_MCP_MAX_LINES` | Max lines per request | `100000` |

---

## Troubleshooting

### Server Not Appearing

1. Verify JSON syntax is valid
2. Restart the client application completely
3. Check that `npx` is available in PATH
4. Run `npx @logpare/mcp --test` to verify installation

### Tools Not Working

1. Check client's MCP logs for errors
2. Verify the server is connected (look for status indicators)
3. Ensure you have the latest version: `npm update -g @logpare/mcp`

### Performance Issues

1. Reduce `maxTemplates` parameter
2. Use `estimate_compression` for large files first
3. Process logs in smaller batches
4. Increase `simThreshold` for fewer templates

---

## Security Best Practices

1. **Local processing**: MCP runs locally—logs stay on your machine
2. **PII masking**: Ensure sensitive data is masked before compression
3. **Review output**: Check compressed output before sharing
4. **Trusted sources**: Only install MCP servers from trusted sources

---

## See Also

- [MCP Specification (v2025-11-25)](https://modelcontextprotocol.io/specification/2025-11-25)
- [UCP Documentation](https://ucp.dev)
- [Parameter Tuning Guide](/docs/guides/parameter-tuning)
- [Custom Preprocessing](/docs/guides/custom-preprocessing)
